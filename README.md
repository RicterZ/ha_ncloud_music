# äº‘éŸ³ä¹

åœ¨ Home Assistant é‡Œä½¿ç”¨çš„äº‘éŸ³ä¹æ’ä»¶

[![hacs_badge](https://img.shields.io/badge/Home-Assistant-%23049cdb)](https://www.home-assistant.io/)
[![hacs_badge](https://img.shields.io/badge/HACS-Custom-41BDF5.svg)](https://github.com/hacs/integration)
![visit](https://visitor-badge.laobi.icu/badge?page_id=neqq3.ha_ncloud_music&left_text=visit)

> ğŸ™ æœ¬é¡¹ç›®åŸºäº [shaonianzhentan/ha_cloud_music](https://github.com/shaonianzhentan/ha_cloud_music) å¼€å‘ï¼Œæ„Ÿè°¢åŸä½œè€…çš„å¼€æºè´¡çŒ®ï¼

---

## å®‰è£…

å®‰è£…å®Œæˆé‡å¯ HAï¼Œåˆ·æ–°ä¸€ä¸‹é¡µé¢ï¼Œåœ¨é›†æˆé‡Œæœç´¢ `äº‘éŸ³ä¹`

[![Add Integration](https://my.home-assistant.io/badges/config_flow_start.svg)](https://my.home-assistant.io/redirect/config_flow_start?domain=ha_ncloud_music)

> æ¥å£è¯´æ˜

æ¥å£æœåŠ¡æ˜¯å¼€æºå…è´¹çš„ï¼Œä½†éœ€è¦è‡ªå·±è¿›è¡Œéƒ¨ç½²ï¼Œç„¶åæŒç»­è¿›è¡Œæ›´æ–°å‡çº§ï¼Œå¦‚æœé‡åˆ°æ¥å£ç›¸å…³çš„é—®é¢˜ï¼Œè¯·å»`NeteaseCloudMusicApiEnhanced`é¡¹ç›®ä¸­æŸ¥æ‰¾é—®é¢˜

https://github.com/neteasecloudmusicapienhanced/api-enhanced

**æ³¨æ„ï¼šå…³è”åª’ä½“æ’­æ”¾å™¨è°ƒæ•´ä¸ºåœ¨é›†æˆé€‰é¡¹ä¸­é€‰æ‹©**

---

## ğŸŒ æ­Œè¯å…¨å±æ’­æ”¾å™¨

ç‹¬ç«‹çš„å…¨å±æ­Œè¯ç½‘é¡µæ’­æ”¾å™¨ï¼Œæ”¯æŒé€å­—æ­Œè¯ã€æ¯›ç»ç’ƒèƒŒæ™¯ã€æ­Œè¯åç§»ï¼š

ğŸ‘‰ **[ha_ncloud_music_web](https://github.com/neqq3/ha_ncloud_music_web)**

<img src="docs/assets/lyrics_web_preview_1.png" width="49%" /> <img src="docs/assets/lyrics_web_preview_2.png" width="49%" />

## ğŸ“š åª’ä½“æµè§ˆå™¨

é€šè¿‡åª’ä½“æµè§ˆå™¨å¯è®¿é—®ï¼šæœç´¢ç»“æœã€æ’­æ”¾åˆ—è¡¨ã€æ¯æ—¥æ¨èã€æˆ‘çš„æ­Œå•ã€æˆ‘çš„ç”µå°ç­‰ã€‚

| åª’ä½“æµè§ˆå™¨é¦–é¡µ | å¯è§†åŒ–æœç´¢ç»“æœ | æ­Œå•è¯¦æƒ… |
|:---:|:---:|:---:|
| ![åª’ä½“æµè§ˆå™¨](docs/assets/media_browser.png) | ![æœç´¢ç»“æœ](docs/assets/search_results_visual.png) | ![æ­Œå•](docs/assets/playlist_detail.png) |

æœç´¢ç»“æœä¹Ÿå¯åœ¨ Dashboard çš„ä¸‹æ‹‰æ¡†ä¸­é€‰æ‹©æ’­æ”¾ï¼š

![æœç´¢é€‰æ‹©](docs/assets/search_select.png)


## ğŸ›ï¸ Dashboard å®ä½“

æœ¬æ’ä»¶è‡ªåŠ¨åˆ›å»ºä»¥ä¸‹å®ä½“ï¼Œå¯ç›´æ¥æ·»åŠ åˆ° Dashboardï¼š

<img src="docs/assets/dashboard_entities.png" width="49%" /> <img src="docs/assets/control_panel.png" width="49%" />

## ğŸ² çœŸéšæœºæ’­æ”¾

å¼€å¯éšæœºæ¨¡å¼åï¼Œæ­Œå•ä¼šè¢«é¢„å…ˆæ‰“ä¹±æˆå›ºå®šçš„éšæœºé¡ºåºï¼š

- **æ™ºèƒ½æ´—ç‰Œ**ï¼šæ’­å®Œä¸€è½®åè‡ªåŠ¨é‡æ–°æ´—ç‰Œï¼Œä¸”ä¿è¯ä¸Šè½®æœ«å°¾æ­Œæ›²ä¸ä¼šå‡ºç°åœ¨æ–°ä¸€è½®å¼€å¤´
- **éšæœºé˜Ÿåˆ—å¯è§†åŒ–**ï¼šå¯åœ¨åª’ä½“æµè§ˆå™¨ä¸­æŸ¥çœ‹ã€Œéšæœºæ’­æ”¾é˜Ÿåˆ—ã€

![éšæœºé˜Ÿåˆ—](docs/assets/shuffle_queue.png)

## â±ï¸ æ™ºèƒ½åˆ‡æ­Œ

åœ¨é›†æˆé€‰é¡¹ä¸­å¯é…ç½®ã€Œåˆ‡æ­Œæ—¶æœºã€ï¼ˆå•ä½ï¼šç§’ï¼‰ï¼š

| å€¼ | æ•ˆæœ |
|---|---|
| **æ­£å€¼**ï¼ˆå¦‚ `3`ï¼‰ | å»¶è¿Ÿåˆ‡æ­Œã€‚ç³»ç»Ÿç­‰å¾…è®¾å®šç§’æ•°ï¼Œè‹¥åº•å±‚æ’­æ”¾å™¨æå‰æŠ¥å‘Šç»“æŸåˆ™ç«‹å³åˆ‡æ­Œ |
| **è´Ÿå€¼**ï¼ˆå¦‚ `-2`ï¼‰ | æå‰åˆ‡æ­Œã€‚åœ¨æ­Œæ›²ç»“æŸå‰ N ç§’åˆ‡æ¢ä¸‹ä¸€é¦–ï¼ˆé€‚åˆå®ç°æ— ç¼è¿‡æ¸¡ï¼‰ |
| **0** | æ­Œæ›²æ’­å®Œç«‹å³åˆ‡æ­Œ |

> ğŸ’¡ **æ™ºèƒ½æŠ¢æ–­**ï¼šè®¾ç½®æ­£å€¼æ—¶ï¼Œè‹¥åº•å±‚æ’­æ”¾å™¨åœ¨ç­‰å¾…æœŸå†…ä¸»åŠ¨æŠ¥å‘Šç»“æŸï¼Œç³»ç»Ÿä¼šæå‰è§¦å‘åˆ‡æ­Œï¼Œé¿å…å¡é¡¿ã€‚

![é…ç½®é€‰é¡¹](docs/assets/config_full.png)

## ä½¿ç”¨

> **æŒ‡å®šIDæ’­æ”¾**

- æ’­æ”¾ç½‘æ˜“äº‘éŸ³ä¹æ­Œå• `cloudmusic://163/playlist?id=25724904`
- æ’­æ”¾ç½‘æ˜“äº‘éŸ³ä¹ç”µå° `cloudmusic://163/radio/playlist?id=1008`
- æ’­æ”¾ç½‘æ˜“äº‘éŸ³ä¹æ­Œæ‰‹ `cloudmusic://163/artist/playlist?id=2116`
- æ’­æ”¾å–œé©¬æ‹‰é›…ä¸“è¾‘ `cloudmusic://xmly/playlist?id=258244`

> **æœç´¢æ’­æ”¾**

- [x] éŸ³ä¹æœç´¢æ’­æ”¾ `cloudmusic://play/song?kv=å…³é”®è¯`
- [x] æ­Œæ‰‹æœç´¢æ’­æ”¾ `cloudmusic://play/singer?kv=å…³é”®è¯`
- [x] æ­Œå•æœç´¢æ’­æ”¾ `cloudmusic://play/list?kv=å…³é”®è¯`
- [x] ç”µå°æœç´¢æ’­æ”¾ `cloudmusic://play/radio?kv=å…³é”®è¯`
- [x] å–œé©¬æ‹‰é›…æœç´¢æ’­æ”¾ `cloudmusic://play/xmly?kv=å…³é”®è¯`
- [ ] FMæœç´¢æ’­æ”¾ `cloudmusic://play/fm?kv=å…³é”®è¯`
- [x] ï¼ˆä¸æ¨èï¼‰ç¬¬ä¸‰æ–¹éŸ³ä¹æœç´¢æ’­æ”¾ `cloudmusic://search/play?kv=å…³é”®è¯`

> **ç™»å½•åæ’­æ”¾**
- [x] æ¯æ—¥æ¨è `cloudmusic://163/my/daily`
- [x] æˆ‘å–œæ¬¢çš„éŸ³ä¹ `cloudmusic://163/my/ilike`

## âš™ï¸ éŸ³è´¨é…ç½®

åœ¨é›†æˆé€‰é¡¹ä¸­å¯é…ç½®é¦–é€‰éŸ³è´¨ï¼Œæ”¯æŒä»æ ‡å‡†åˆ°è¶…æ¸…æ¯å¸¦çš„å¤šç§é€‰æ‹©ï¼š

> âš ï¸ **æ³¨æ„**ï¼šæ­¤å¤„ä»…è®¾ç½®æœŸæœ›çš„æœ€é«˜éŸ³è´¨ï¼Œå®é™…æ’­æ”¾éŸ³è´¨å—é™äºæ‚¨çš„æƒç›Šã€‚é«˜éŸ³è´¨/ç‰¹æ•ˆéŸ³è´¨ä¾èµ–æ’­æ”¾è®¾å¤‡è§£ç ï¼Œè‹¥è®¾å¤‡ä¸æ”¯æŒå¯èƒ½å¯¼è‡´é™éŸ³æˆ–æ’­æ”¾å¤±è´¥ã€‚

![éŸ³è´¨é…ç½®](docs/assets/audio_quality.png)

## ğŸ¤– æœåŠ¡è°ƒç”¨ï¼ˆè‡ªåŠ¨åŒ– / AI è¯­éŸ³ï¼‰

æœ¬æ’ä»¶æä¾›ä»¥ä¸‹æœåŠ¡ï¼Œå¯ç”¨äºè‡ªåŠ¨åŒ–æˆ– AI è¯­éŸ³åŠ©æ‰‹è°ƒç”¨ï¼š

| æœåŠ¡ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `ha_ncloud_music.search` | æœç´¢å¹¶æ’­æ”¾éŸ³ä¹ã€æ­Œæ‰‹ã€æ­Œå•æˆ–ç”µå° | å…³é”®è¯ï¼š`è¿ªè¿¦å¥¥ç‰¹æ›¼` |
| `ha_ncloud_music.play_by_id` | é€šè¿‡ ID ç²¾å‡†æ’­æ”¾æ­Œæ›²ã€æ­Œå•ã€ä¸“è¾‘æˆ–ç”µå° | IDï¼š`25724904` |
| `ha_ncloud_music.play_daily` | æ’­æ”¾æ¯æ—¥æ¨èæ­Œå• | - |
| `ha_ncloud_music.play_favorites` | æ’­æ”¾"æˆ‘å–œæ¬¢çš„éŸ³ä¹" | - |

> ğŸ’¡ **æç¤º**ï¼šæ”¯æŒç»„åˆæœç´¢ï¼Œè¾“å…¥ `æ­Œæ‰‹å æ­Œæ›²å` å¯æé«˜åŒ¹é…å‡†ç¡®åº¦ã€‚

<img src="docs/assets/service_list.png" width="49%" /> <img src="docs/assets/service_search.png" width="49%" />

<details>
<summary>ğŸ“ æœç´¢æœåŠ¡ç¤ºä¾‹ YAML</summary>

```yaml
service: ha_ncloud_music.search
data:
  keyword: "å¥‡è¿¹å†ç° æ¯›åå³°"
  type: song  # å¯é€‰ï¼šsong, artist, playlist, djradio, album
```
</details>

## ğŸµ æ­Œè¯å¡ç‰‡

æ­Œè¯å¡ç‰‡å·²ç‹¬ç«‹ä¸ºå•ç‹¬é¡¹ç›®ï¼Œè¯·è®¿é—®ï¼š[ha_ncloud_music_card](https://github.com/neqq3/ha_ncloud_music_card)

## å…³è”é¡¹ç›®

- https://github.com/shaonianzhentan/cloud_music_mpd
- https://github.com/shaonianzhentan/ha_windows

#### å…³æ³¨shaonianzhentançš„å¾®ä¿¡è®¢é˜…å·ï¼Œäº†è§£æ›´å¤šHomeAssistantç›¸å…³çŸ¥è¯†